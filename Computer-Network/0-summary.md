# 概述

* 计算机网络是互连（互联互通）、自治（无主从关系）的计算机集合

![image-20250501133316637](imgs\image-20250501133316637.png)

* 集线器（扩大计算机网络，会产生数据冲突）
* 交换机（扩大计算机网络，没有数据冲突）
* 路由器（连接计算机网络，形成或扩大互连网）

![image-20250501133505835](imgs\image-20250501133505835.png)

* **互连网 = internet** —— ≥2个的计算机网络相互连接组成

  可以使用任意协议通信

* **互联网 = 因特网 = Internet** —— 覆盖全球范围的互连网

  必须使用 TCP/IP 协议通信

![image-20250501133837029](imgs\image-20250501133837029.png)

* 家用路由器 = 路由器 + 交换机 + 其他功能（形成局域网，同时也能和互联网通信）

## 计算机网络的组成

### 1. 硬件 + 软件 + 协议

![image-20250501134823223](imgs\image-20250501134823223.png)

* 主机 = 端系统
* 路由器也相当于一个小型计算机，也安装了和通信相关的软件
* 协议 —— **由软件、硬件共同实现**

![image-20250501134627512](imgs\image-20250501134627512.png)

* 网络适配器 = 网卡，负责主机和外部网络的数据收发
* 网络适配器的ROM芯片里存储了一些固件（特殊软件），结合网络适配器的硬件来实现特定的网络协议

### 2. 边缘 + 核心

![image-20250501135054661](imgs\image-20250501135054661.png)

* 交换服务 —— 动态选择数据传输路径

  实现交换服务的核心设备是路由器

### 3. 资源子网 + 通信子网

![image-20250501135328954](imgs\image-20250501135328954.png)

* 类似边缘+核心，只是主机的网络适配器、底层协议也属于通信子网

![image-20250501135226127](imgs\image-20250501135226127.png)

## 计网六个功能

![image-20250508095037621](imgs\image-20250508095037621.png)

+ 数据通信（最基本最重要）
+ 资源共享（硬件、软件、数据）
+ 分布式处理（分布同一个任务的不同步骤，例如矩阵运算 ）
+ 提高可靠性（服务器备份）
+ 负载均衡（分布不同的任务）
+ 其他

## 四种通信技术

### 1）电路交换

![image-20250510221319063](imgs\image-20250510221319063.png)

* 电路交换技术流程 —— 
  1. 建立连接（电路建立）
  2. 通信
  3. 释放连接（拆除电路）
* 三种可能遇到的情况 —— 短途、长途、占线 

![image-20250508095749245](imgs\image-20250508095749245.png)

* 优：传输效率高（**适用于低频、大量数据传输**）

  缺：建立、释放连接额外占用时间（不适用于高频、少量数据传输）

  ​	线路独占，利用率低

  ​	线路灵活性差（一个结点出错，整条线路需要断开重连）

  ​	不支持差错控制（0000->0001无法检错）

### 2）报文交换

![image-20250510222326935](imgs\image-20250510222326935.png)

* **报文 = message = 控制信息 + 用户数据**
* 报文交换机支持**存储转发**（有一定内存，允许报文排成队列，报文交换机**判断**下一个交换节点的地址）

![image-20250510222653970](imgs\image-20250510222653970.png)

* 优：不需要提前建立连接

  ​	存储转发，线路灵活

  ​	不独占线路

  ​	交换节点支持差错控制

  缺：报文不定长，报文交换机存储空间有限

  ​	长报文校验时间更长

  ​	长报文出错重传时间代价更高

### 3）分组交换

![image-20250510223047287](imgs\image-20250510223047287.png)

* 报文分组

  每个分组 = 首部（控制信息） + 数据

![image-20250510223331902](imgs\image-20250510223331902.png)

* **路由器**是典型的**分组交换机**
* 路由器通过IP地址判断转发节点

![image-20250510223658276](imgs\image-20250510223658276.png)

* 具备报文交换的优点，解决了报文不定长和长报文的传输问题

* 缺：控制信息占比过多；

  ​	存储转发占据时间；

  ​	接收方需要对分组排序

### 4）虚电路交换

![image-20250510223959775](imgs\image-20250510223959775.png)

+ 约定好虚拟线路的分组交换，不独占线路
+ 缺：把边缘部分可以完成的分组失序、丢失等问题，转移给核心部分解决，增加了核心部分的负担
+ 现代计算机网络仍采用**分组交换技术**

### 性能对比

![image-20250513195051139](imgs\image-20250513195051139.png)

* A结点在数据传送完毕后，可以立即发出“连接释放”信号

![image-20250513195322302](imgs\image-20250513195322302.png)

![image-20250513200104750](imgs\image-20250513200104750.png)

![image-20250513200223750](imgs\image-20250513200223750.png)

## 计算机网络分类

### 按分布范围分类

![image-20250513200451615](imgs\image-20250513200451615.png)

+ 分布范围：广域网 $WAN$（交换技术）、城域网$MAN$、局域网 $LAN$（广播技术）、个人区域网 $PAN$。

+ 局域网 使用 以太网 技术实现，可以认为 **局域网 = 以太网 = LAN（以太网不止局域网）**

### 按传输技术分类

![image-20250513200906909](imgs\image-20250513200906909.png)

* 所有**无线网络**都是**广播式**

### 按拓扑结构分类

![image-20250513201042655](imgs\image-20250513201042655.png)

* 使用**集线器**连接的各设备，物理上星型结构，**逻辑上是总线型结构**
* **令牌环网**解决了总线争用问题（使用令牌）

![image-20250513201331353](imgs\image-20250513201331353.png)

* 使用**交换机**连接的各设备，物理上星型结构，**逻辑上也是星型结构**
* 网状结构适用于广域网WAN

### 按使用者分类

![image-20250513201526128](imgs\image-20250513201526128.png)

### 按传输介质分类

![image-20250513201556402](imgs\image-20250513201556402.png)

![image-20250513201724157](imgs\image-20250513201724157.png)

## 计网的性能指标

![image-20250513201945431](imgs\image-20250513201945431.png)

* **信道**是逻辑概念
* 发送信道、接受信道

### 速率

![image-20250513202242776](imgs\image-20250513202242776.png)

### 带宽

![image-20250513202414742](imgs\image-20250513202414742.png)

* 下行信道 = 接收信道、对应下行带宽
* 上行信道 = 发送信道、对应上行带宽

![image-20250513202613689](imgs\image-20250513202613689.png)

* 限制网络传输速度的因素 —— 通信**双方的网卡**、通信**带宽**

![image-20250513203036943](imgs\image-20250513203036943.png)

* 带宽 —— 信道能通过的最高数据率

  带宽 —— 信道允许通过的信号频率范围大小

### 吞吐量

![image-20250513203345559](imgs\image-20250513203345559.png)

* 吞吐量 —— **某个网络**在单位时间内的综合负载

### 时延

![image-20250513204020099](imgs\image-20250513204020099.png)

* 每经过一个信道，产生一次发送时延和传播时延
* 每经过一次中间结点，产生一次处理时延和排队时延

![image-20250513204349566](imgs\image-20250513204349566.png)

### 时延带宽积

![image-20250513204524521](imgs\image-20250513204524521.png)

* **时延带宽积=传播时延×带宽**，单位为$bit$，表示链路当前的数据比特容量

![image-20250513204938011](imgs\image-20250513204938011.png)

![image-20250513204949869](imgs\image-20250513204949869.png)

### 往返时延RTT

![image-20250513205130669](imgs\image-20250513205130669.png)

* 往返时延RTT —— 从发送方发送数据开始，到发送方收到接收方的确认总共经历的时延

* $RTT$越大，双方通信越卡顿

### 利用率

![image-20250513205425286](imgs\image-20250513205425286.png)

+ **信道利用率**：$\frac {有数据通过时间}  {（有+无）数据通过时间}$
+ **网络利用率**：网络中所有信道利用率的 **加权平均值**

![image-20250513205521127](imgs\image-20250513205521127.png)

![image-20250513203601009](imgs\image-20250513203601009.png)

![image-20250513205652389](imgs\image-20250513205652389.png)

## 网络的分层结构

### 三种网络的体系结构

![image-20250514171527837](imgs\image-20250514171527837.png)

* OSI参考模型是ISO组织提出的
* 分别有7、4、5层

![image-20250514171700815](imgs\image-20250514171700815.png)

* 网络体系结构的任务 —— 分层、每层的功能、实现功能的协议

### 实体、协议、接口、服务

![image-20250514172809726](imgs\image-20250514172809726.png)

* 横向：
  * 实体
  * 对等实体
  * 协议

![image-20250514172946966](imgs\image-20250514172946966.png)

* 纵向：
  * 接口 = 服务访问点 = SAP
  * 服务

### PDU、SDU、PCI

![image-20250514173931474](imgs\image-20250514173931474.png)

* 数据经过**每一层**都要**添加控制信息**（添加**首部或尾部**）：
  * 每一层都需要实现特定的功能
  * 同一种功能，有多种实现方式
  * 使用**控制信息**，指明该层使用了**哪种功能实现算法**

![image-20250514174145044](imgs\image-20250514174145044.png)

![image-20250514174418363](imgs\image-20250514174418363.png)

* PDU —— 该层的数据 + 控制信息
* SDU —— 该层的数据
* PCI —— 该层的控制信息

### 协议三要素

![image-20250514174634341](imgs\image-20250514174634341.png)

* 协议三要素 —— 
  * 语法
  * 语义
  * 同步/时序

![image-20250514174922171](imgs\image-20250514174922171.png)

### OSI参考模型

![image-20250514180037109](imgs\image-20250514180037109.png)

* 传输层 = 运输层
* 网络层 = 网际层

![image-20250514180200337](imgs\image-20250514180200337.png)

* 不同结点实现的层次不同，最高的中间结点**路由器到了网络层**
* **物理传输媒体**（光纤、电缆）往往被视为**第零层**

![image-20250514180419786](imgs\image-20250514180419786.png)

* 物理层以**比特**为单位进行数据传输

![image-20250514180603552](imgs\image-20250514180603552.png)

* 数据链路层以**帧**为单位进行数据传输

  **帧 = Frame**

* 流量控制 —— 控制帧发送的速率，符合双方的发送/接收速度

![image-20250514181202070](imgs\image-20250514181202070.png)

* 网络层以**分组**为单位进行数据传输

  **分组 = 数据报 = Packet**

* 拥塞控制 —— 协调信道利用率

* 数据链路层的差错控制、流量控制是以帧为单位的

  网络层的差错控制、流量控制是以分组为单位的

![image-20250514181546515](imgs\image-20250514181546515.png)

* 传输层以**报文段**为单位进行数据传输

  **报文段 = Segment**

* 网络层实现 主机 —— 主机 之间的通信

  传输层实现 进程 —— 进程 （端 —— 端）之间的通信

![image-20250514181707703](imgs\image-20250514181707703.png)

* 会话层
  * 检查点机制 —— 断点续传

![image-20250514181753059](imgs\image-20250514181753059.png)

* 表示层
  * 编码解码，压缩解压

![image-20250514181930342](imgs\image-20250514181930342.png)

![image-20250514182255444](imgs\image-20250514182255444.png)

* 报文 -> 报文段 -> 分组 -> 帧 -> 比特，数据逐渐拆分（数据的分段）
* 比特 -> 帧 -> 分组 -> 报文段 -> 报文，数据的重装

![image-20250514182337968](imgs\image-20250514182337968.png)

### TCP/IP参考模型

#### 应用层、网络接口层的区别

![image-20250517133100299](imgs\image-20250517133100299.png)

* **会话层和表示层**的功能不是所有网络应用都必须用到的，所以可以**并入应用层**，交给应用层的特定协议去实现。

* 物理层和数据链路层使用OSI定死的标准不方便技术创新，所以统一为网络接口层，TCP/IP协议**只要求网络接口层为网络层传输分组，不规定具体实现**。

#### 网络层、传输层的区别

![image-20250517133324111](imgs\image-20250517133324111.png)

![image-20250517133433095](imgs\image-20250517133433095.png)

* 网络层不再实现差错管理、流量控制、连接建立与释放、可靠传输管理（也就是说，**网络层的数据传输变得不再可靠**）

  由**传输层负责**保证信息的正确性、**可靠性**

* 中间结点最多到网络层，网络层不再负责数据可靠 -> 使用TCP/IP协议**减轻了中间结点的负担，由网络边缘部分（主机）负责数据传输的正确**，中间结点传输分组的性能大幅度提升

![image-20250517133853716](imgs\image-20250517133853716.png)

![image-20250517134130432](imgs\image-20250517134130432.png)

|  |$OSI$参考模型|$TCP/IP$模型 |
| :----: | :-------------: | :-------------: |
| 传输层 | 面向连接  | 无连接+面向连接 |
| 网络层 | 无连接+面向连接 |  无连接|

### 五层参考模型

应用层、传输层、网络层、数据链路层、物理层。
